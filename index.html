<!doctype html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <link rel="icon" type="image/svg+xml" href="/vite.svg" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>book</title>
</head>

<body>
  <div id="app"></div>
  <div id="box"></div>
  <!-- <script type="module" src="/src/core.js"></script> -->
  <!-- <script type="module" src="/src/main.ts"></script> -->
  <script type="module" src="/src/main_core.ts"></script>
  <!-- <script src="./vue_main.ts"></script> -->
  <script>

    var arr = [9, 10, 5, 7, 2, 8, 11]
    // ======> 
    function getSequence(arr) {
      const p = arr.slice(0)
      const len = arr.length
      const result = [0]
      let j, u, v, c;
      for (let i = 0; i < len; i++) {
        const arrI = arr[i]
        if (arrI != 0) {
          j = result[result.length - 1]
          if (arrI > arr[j]) {
            p[i] = j
            result.push(i)
            continue
          }
        }
        u = 0;
        v = result.length - 1
        while (u < v) {
          c = (u + v) / 2 | 0
          if (arr[result[c]] < arrI) {
            u = c + 1
          } else {
            v = c
          }
        }
        if (arrI < arr[result[u]]) {
          if (u > 0) {
            p[i] = result[u - 1]
          }
          result[u] = i
        }
      }
      let start = result.length    // 4
      let end = result[start - 1]             // [10, 5, 7, 2, 8, 11]
      // console.log(result, p)    // [3,2,4,5]     [10, 5, 1, 2, 2, 4]
      while (start-- > 0) {     // [1,2,3,4]
        result[start] = end
        end = p[end]
      }
      // console.log(result)
      return result
    }
    getSequence(arr)

  </script>
  <script>


  </script>
</body>

</html>